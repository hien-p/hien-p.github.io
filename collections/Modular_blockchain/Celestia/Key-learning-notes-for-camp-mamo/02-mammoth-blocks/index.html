<!DOCTYPE html><html lang=en> <head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width, initial-scale=1.0"><link href=https://hien-p.github.io/hari-docs/collections/Modular_blockchain/Celestia/Key-learning-notes-for-camp-mamo/02-mammoth-blocks/ rel=canonical><link rel="shortcut icon" href=../../../../../img/favicon.ico><meta name=viewport content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"><title>MAMMOTH BLOCKS = MAMMOTH UNLOCKS - Harry's Blog</title><link href=../../../../../css/bootstrap-3.3.7.min.css rel=stylesheet><link href=../../../../../css/font-awesome-4.7.0.css rel=stylesheet><link href=../../../../../css/base.css rel=stylesheet><link rel=stylesheet href=../../../../../css/highlight.css><link href=../../../../../css/custom.css rel=stylesheet><!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries --><!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]--><!-- mkdocs_windmill/partials/scripts.html --><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-S5RMPC6VZL"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-S5RMPC6VZL');
</script><script src=../../../../../js/jquery-3.2.1.min.js></script><script src=../../../../../js/bootstrap-3.3.7.min.js></script><script src=../../../../../js/highlight.pack.js></script><base target=_top><script>
      var base_url = '../../../../..';
      var is_top_frame = false;
        
        var pageToc = [
          {title: "MAMMOTH BLOCKS = MAMMOTH UNLOCKS", url: "#_top", children: [
              {title: "M\u1ee5c ti\u00eau c\u1ee7a b\u00e0i h\u1ecdc n\u00e0y:", url: "#muc-tieu-cua-bai-hoc-nay" },
              {title: "1. Mammoth Blocks = B\u0103ng th\u00f4ng si\u00eau to kh\u1ed5ng l\u1ed3", url: "#1-mammoth-blocks-bang-thong-sieu-to-khong-lo" },
              {title: "2. Nh\u1eefng kh\u00e1i ni\u1ec7m b\u1ea1n c\u1ea7n bi\u1ebft:", url: "#2-nhung-khai-niem-ban-can-biet" },
              {title: "3. Mamo-1 l\u00e0 g\u00ec?", url: "#3-mamo-1-la-gi" },
              {title: "4. Vacuum Protocol Explained", url: "#4-vacuum-protocol-explained" },
              {title: "5. V\u00ec sao dev n\u00ean quan t\u00e2m \u0111\u1ebfn mamo-1?", url: "#5-vi-sao-dev-nen-quan-tam-en-mamo-1" },
              {title: "T\u00f3m l\u1ea1i:", url: "#tom-lai" },
          ]},
        ];

    </script><script src=../../../../../js/base.js></script><script src=../../../../../search/main.js></script><meta property=og:title content="Harry's Blog - Developer Documentation Technical Writer 🚀"><meta property=og:description content="Học Blockchain dễ hiểu, dành cho dev Web3"><meta property=og:image content=https://harriweb3.dev/assets/facebook_cover.png><meta property=og:type content=website><meta content=https://harriweb3.dev/ property=og:url><meta name=twitter:card content=summary_large_image><meta name=twitter:title content="Harry's Blog - Developer Documentation Technical Writer 🚀 "><meta name=twitter:description content="Học Blockchain dễ hiểu, dành cho dev Web3 mới vào nghề!"><meta name=twitter:image content=https://harriweb3.dev/assets/facebook_cover.png><link rel=stylesheet href=../../../../../css/extra.css></head> <body> <script>
if (is_top_frame) { $('body').addClass('wm-top-page'); }
</script> <div class="container-fluid wm-page-content"> <a name=_top></a> <div class="row wm-article-nav-buttons" role=navigation aria-label=navigation> <div class="wm-article-nav pull-right"> <a href=../03-VerifiableEncryption-PrivateDA/ class="btn btn-xs btn-default pull-right"> Next <i class="fa fa-chevron-right" aria-hidden=true></i> </a> <a href=../03-VerifiableEncryption-PrivateDA/ class="btn btn-xs btn-link"> VERIFIABLE ENCRYPTION &amp; PRIVATE Data trên Celestia </a> </div> <div class=wm-article-nav> <a href=../01-Celestia_Da_DAS_Blobs/ class="btn btn-xs btn-default pull-left"> <i class="fa fa-chevron-left" aria-hidden=true></i> Previous</a><a href=../01-Celestia_Da_DAS_Blobs/ class="btn btn-xs btn-link"> DA, DAS, and Blobs — Celestia Lesson 📦🧠 </a> </div> </div> <h1 id=mammoth-blocks-mammoth-unlocks>MAMMOTH BLOCKS = MAMMOTH UNLOCKS<a class=headerlink href=#mammoth-blocks-mammoth-unlocks title="Permanent link">&para;</a></h1> <h2 id=muc-tieu-cua-bai-hoc-nay>Mục tiêu của bài học này:<a class=headerlink href=#muc-tieu-cua-bai-hoc-nay title="Permanent link">&para;</a></h2> <blockquote> <p>Trả lời câu hỏi: <strong>"How do Celestia's 'mammoth blocks' benefit developers compared to traditional small blocks?"</strong></p> </blockquote> <hr> <h2 id=1-mammoth-blocks-bang-thong-sieu-to-khong-lo>1. Mammoth Blocks = Băng thông siêu to khổng lồ<a class=headerlink href=#1-mammoth-blocks-bang-thong-sieu-to-khong-lo title="Permanent link">&para;</a></h2> <p>Celestia có khả năng mở rộng ấn tượng nhờ băng thông xử lý block cực khủng. Từ giới hạn 8MB/block trên mainnet hiện tại, Celestia đã mở rộng lên 128MB trên testnet <code>mamo-1</code>, và đang hướng đến mục tiêu 1GB/block trong tương lai gần. Với tốc độ xử lý khoảng <strong>21.33MB mỗi giây</strong>, Celestia đang thiết lập một chuẩn mới cho hạ tầng blockchain modular.</p> <p>Điều này mở ra cánh cửa mới cho dev:</p> <blockquote> <p>Không còn bị bóp nghẹt bởi block size truyền thống. Có thể xây các ứng dụng full on-chain phức tạp như:</p> </blockquote> <ul> <li>Mạng xã hội lưu trữ toàn bộ dữ liệu on-chain</li> <li>Prediction markets</li> <li>Advanced DeFi protocols</li> </ul> <hr> <h2 id=2-nhung-khai-niem-ban-can-biet>2. Những khái niệm bạn cần biết:<a class=headerlink href=#2-nhung-khai-niem-ban-can-biet title="Permanent link">&para;</a></h2> <h3 id=mammoth-blocks>🧱 Mammoth Blocks<a class=headerlink href=#mammoth-blocks title="Permanent link">&para;</a></h3> <p>Celestia hỗ trợ block cực lớn (từ 128MB trở lên), lý tưởng cho các ứng dụng stateful có tần suất tương tác cao, yêu cầu lưu trữ dày đặc.</p> <h3 id=vacuum-protocol>🚀 Vacuum Protocol<a class=headerlink href=#vacuum-protocol title="Permanent link">&para;</a></h3> <p>Giao thức truyền tải dữ liệu thế hệ mới. Thay vì truyền dữ liệu theo kiểu push/gossip truyền thống, Vacuum sử dụng mô hình <strong>pull-based</strong>. Node chỉ nhận data khi <strong>yêu cầu</strong>, giúp giảm latency và tối ưu băng thông.</p> <ul> <li>Sử dụng <strong>lazy gossiping</strong>: chỉ gửi dữ liệu khi được hỏi → tiết kiệm cực mạnh.</li> <li>Kết hợp với <strong>VACs (Validator Availability Certificates)</strong> để pipeline dữ liệu trước cả khi block được tạo.</li> <li>Truyền dữ liệu kiểu "prep trước, race sau" → tốc độ khủng mà vẫn mở rộng tốt.</li> <li>Đặc biệt, Vacuum không cần biết trước topology mạng → linh hoạt mọi tình huống.</li> </ul> <h3 id=fbss-fast-blocks-slow-squares>⏩ FBSS – Fast Blocks, Slow Squares<a class=headerlink href=#fbss-fast-blocks-slow-squares title="Permanent link">&para;</a></h3> <p>Một bước đột phá về kiến trúc:</p> <blockquote> <p>Tách block production ra khỏi square construction.</p> </blockquote> <p>Trong thiết kế truyền thống, block và square là 1. Nhưng điều đó khiến block time bị kéo dài vì cần thời gian để xây square đủ lớn để sampling hiệu quả.</p> <p>Với <strong>FBSS</strong>:</p> <ul> <li>Có thể tạo block siêu nhanh (sub-second block time)</li> <li>Square vẫn được xử lý, nhưng trong chu trình riêng, chậm hơn (30s+)</li> <li>Light client hưởng lợi → chỉ cần xử lý ít dữ liệu khi sampling</li> </ul> <p>Hiện tại, FBSS chưa được triển khai full-stack trong Mammoth Mini, nhưng team đã <strong>simulate</strong> bằng cách dùng <strong>Merkle tree đơn giản của txs</strong> để commit block.</p> <h3 id=based-rollups>🧬 Based Rollups<a class=headerlink href=#based-rollups title="Permanent link">&para;</a></h3> <p>Rollup có thể tận dụng Celestia để sequencing → kế thừa finality nhanh → giảm latency, tăng UX cực mạnh. Cực kỳ phù hợp cho game, DeFi real-time hoặc social.</p> <h3 id=verification-trust>🔍 Verification &gt; Trust<a class=headerlink href=#verification-trust title="Permanent link">&para;</a></h3> <p>Light node không cần trust ai. Họ có thể <strong>tự verify</strong> data availability qua sampling, thay vì chạy full node. Điều này mở ra tương lai nơi bạn có thể verify blockchain từ... điện thoại.</p> <hr> <h2 id=3-mamo-1-la-gi>3. Mamo-1 là gì?<a class=headerlink href=#3-mamo-1-la-gi title="Permanent link">&para;</a></h2> <p><code>mamo-1</code> là public testnet mới của Celestia, được dựng lên trong đúng 3 tuần. Đây không phải bản demo lý thuyết, mà là mô phỏng thực chiến để:</p> <ul> <li>Đẩy thông lượng lên cực hạn</li> <li>Test khả năng chịu tải mạng lưới</li> <li>Phát hiện bottleneck</li> <li>Tối ưu performance thực tế</li> </ul> <h3 id=thong-so>Thông số:<a class=headerlink href=#thong-so title="Permanent link">&para;</a></h3> <ul> <li>Block size: 128MB</li> <li>Block interval: 6s</li> <li>Throughput: ~21.33MB/s</li> </ul> <p>→ Nhanh hơn mainnet hiện tại (8MB/block) tới <strong>16 lần</strong>.</p> <hr> <h2 id=4-vacuum-protocol-explained>4. Vacuum Protocol Explained<a class=headerlink href=#4-vacuum-protocol-explained title="Permanent link">&para;</a></h2> <p>Vacuum là giao thức truyền block với:</p> <ul> <li><strong>Lazy gossip</strong>: chỉ gửi khi được hỏi → tiết kiệm cực mạnh</li> <li><strong>VACs</strong>: Validator báo trước đã nhận blob data → giúp proposer tối ưu pipeline tạo block</li> </ul> <h3 id=co-che-pull-based-broadcast-tree-pbbt>Cơ chế Pull-Based Broadcast Tree (PBBT):<a class=headerlink href=#co-che-pull-based-broadcast-tree-pbbt title="Permanent link">&para;</a></h3> <ul> <li>Một dạng cây truyền dữ liệu theo mô hình pull</li> <li>Giúp phục hồi block nhanh và hiệu quả</li> </ul> <blockquote> <p>Vacuum giống với DAG-based protocols ở tư duy pipeline, nhưng <strong>đơn giản và hiệu quả</strong> hơn, không cần biết topology mạng như Turbine (Solana).</p> </blockquote> <h3 id=jit-routing-just-in-time>JIT Routing (Just-In-Time)<a class=headerlink href=#jit-routing-just-in-time title="Permanent link">&para;</a></h3> <ul> <li> <p>Khi truyền blob, hệ thống sẽ tự khám phá tuyến đường tối ưu dựa trên:</p> </li> <li> <p>Latency</p> </li> <li>Congestion</li> <li>Trust level giữa peers</li> </ul> <p>→ Khác với AOT (Ahead-of-Time) routing cứng nhắc, JIT routing cực kỳ linh hoạt và phù hợp với Web3 environments đầy biến động.</p> <p><strong>Cảnh báo:</strong> Lazy gossip tuy hiệu quả, nhưng cũng mang lại một chút latency. Đây là trade-off có chủ đích: hy sinh tốc độ tức thì để đổi lấy <strong>khả năng mở rộng ổn định, băng thông mạnh và hoạt động tốt trong mạng không đồng đều</strong>.</p> <p><a href="https://github.com/celestiaorg/celestia-app/blob/e666c7d38940ef32c475d8347eee301fa91fe327/specs/src/vacuum.md?ref=blog.celestia.org#vacuum-spec">Đọc thêm về Vacuum tại đây</a></p> <hr> <h2 id=5-vi-sao-dev-nen-quan-tam-en-mamo-1>5. Vì sao dev nên quan tâm đến mamo-1?<a class=headerlink href=#5-vi-sao-dev-nen-quan-tam-en-mamo-1 title="Permanent link">&para;</a></h2> <ul> <li>Rollups có thể xử lý block lên tới <strong>32MB</strong></li> <li>Có thể tạo block <strong>permissionless</strong></li> <li>Light node có thể verify từ <strong>trình duyệt hoặc mobile</strong></li> </ul> <blockquote> <p>Dev không cần lo chuyện scaling hay infra nữa, chỉ cần <strong>tập trung build sản phẩm</strong>.</p> </blockquote> <hr> <h2 id=tom-lai>Tóm lại:<a class=headerlink href=#tom-lai title="Permanent link">&para;</a></h2> <p>Celestia đang định nghĩa lại cách blockchain mở rộng bằng:</p> <ul> <li>Mammoth Blocks</li> <li>Vacuum Protocol</li> <li>FBSS</li> <li>Based Rollups</li> <li>Trustless light clients</li> </ul> <p>Với mamo-1 testnet, dev có thể hình dung chính xác những gì Celestia <strong>có thể làm được</strong> trong thực tế. Đây không còn là lời hứa – nó đang xảy ra.</p> <hr> <p>Advanced: Who has the fastest block propagation? </p> <p><img alt src="https://pbs.twimg.com/media/GoBlS6RasAA8A6M?format=jpg&name=medium"></p> <p>Cả Solana, Monad và Celestia đều chia block thành các mảnh nhỏ được mã hóa (erasure coded) rồi phân phối cho validators không phải leader.</p> <p>Solana và Monad dùng cơ chế push — leader chủ động gửi block tới validators, ưu tiên tốc độ finality bằng cách để những validator có stake cao nhận data sớm và bắt đầu xác minh ngay.</p> <p>Ngược lại, Celestia với giao thức Vacuum! chọn cách pull — các validator tự yêu cầu phần dữ liệu còn thiếu, giúp giảm tải cho proposer (chỉ cần upload ~1x dung lượng block), tối ưu cho throughput thay vì tốc độ finality.</p> <p>Cấu trúc chung của data pipeline:</p> <p>Mỗi mạng blockchain thường có 2 pha xử lý dữ liệu: (1) Preparation – giai đoạn chuẩn bị trước khi block được tạo (2) Dissemination – giai đoạn phân phối dữ liệu sau khi block được tạo</p> <p>Ở pha chuẩn bị, Solana dùng hệ thống Gulfstream kết hợp với swQOS. Điểm đặc biệt là Solana không có global mempool như các chain khác — thay vào đó, mỗi leader duy trì một local mempool riêng. Điều này giúp tránh được overhead từ việc gossip nhiều hop trong mempool lớn, từ đó giữ cho mạng luôn ở tốc độ cao mà không overload node.</p> <p>Ứng dụng sẽ gửi transaction đến RPC node, sau đó node này sẽ gửi trực tiếp (chỉ 1 hop) tới một vài leader kế tiếp qua Gulfstream. Do lịch trình leader được biết trước, nên validator nào cũng có thể chủ động route tx tới leader sắp tới. Để chống spam, leader sẽ ưu tiên xử lý tx đến từ validators có stake cao hơn đó chính là logic của swQOS (stake-weighted Quality of Service).</p> <p>Khi bước vào pha phân phối, Solana dùng Turbine — một engine truyền block theo mô hình cây (tree-based fanout). Trong khi leader đang build block, dữ liệu block được chia thành các mảnh nhỏ gọi là shreds (~1280 bytes mỗi shred), sau đó gửi đi. Điều này cho phép các bước verify và voting được pipeline luôn khi block chưa build xong.</p> <p>Cụ thể: Leader gửi shreds đến root node thì root chia validators thành các tầng dựa theo stake → những validator có stake cao nhận shred trước, sau đó forward xuống tầng dưới. Với fanout mặc định là 200, phần lớn validator sẽ nhận được dữ liệu chỉ sau 2–3 hops (leader → root → L1 → L2).</p> <hr> <p>Celestia lại chọn hướng tiếp cận khác là tối ưu cho throughput thay vì latency. Không giống như Turbine (Solana) hay RaptorCast (Monad) đều là cơ chế <strong>push</strong>. Celestia dùng <strong>Vacuum!</strong>, một mô hình pull-based, cho phép thiết lập liên lạc kiểu just-in-time giữa các node.</p> <p>Ở pha chuẩn bị, thay vì gửi full txs, validators trên Celestia sẽ sync mempool thông qua một loại chứng chỉ tên là VAC (Validator Availability Certificate). Đây là lời hứa của validator rằng họ đang giữ một tx nào đó và sẽ đảm bảo tx đó có sẵn đến một độ cao block nhất định.</p> <p>VAC hoạt động như một dạng pre-announcement: thay vì đẩy tx ra mạng, validator chỉ cần phát tán VACs để thông báo <strong>“tao đang giữ tx này, đứa nào cần thì hỏi”</strong>. Việc này giúp mạng biết nhanh các tx quan trọng mà không bị ngập vì payload lớn.</p> <p><img alt src="https://pbs.twimg.com/media/GoBlbKqbwAA4KXY?format=png&name=small"></p> <p>Ở thời điểm Data Retrieval, khi node cần dữ liệu, nó chủ động đi xin. Khi một node thấy VAC từ validator khác mà nó chưa có dữ liệu, nó sẽ quyết định có nên đi fetch hay không.</p> <p>Chính sách của Vacuum! là <strong>luôn lấy ít nhất VAC đầu tiên (tx quan trọng nhất)</strong> từ mỗi validator mới thấy lần đầu. Còn các VAC tiếp theo thì chỉ fetch nếu node còn đủ băng thông, hoặc nếu tx đó quan trọng hơn những tx nó đang định drop.</p> <p>Để lấy dữ liệu, node gửi một yêu cầu có tên <strong>‘WantBlob’</strong> đến peer đang giữ blob. Peer sẽ gửi lại blob đó, chia thành từng chunk nhỏ. Điều thú vị là ngay khi node bắt đầu tải blob về, nó sẽ gossip VAC đó ra cho những node khác, tạo ra một chuỗi fetch pipeline theo nhu cầu.</p> <p>Mô hình lazy gossiping kiểu này tránh được việc truyền dữ liệu trùng lặp, giúp mỗi tx chỉ chảy qua mạng đúng một lần, theo tuyến đường tối ưu vừa tiết kiệm, vừa tăng throughput.</p> <p><img alt src="https://pbs.twimg.com/media/GoBlcIPbwAAbSrp?format=png&name=900x900"></p> <p>Vì mempool đã được sync kỹ nhờ VACs từ trước, nên khi leader chuẩn bị tạo block, phần lớn dữ liệu đã nằm sẵn ở các validator.</p> <p>Leader lúc này chỉ cần broadcast một compact block cực nhẹ, gần như không tốn băng thông.</p> <p>Compact block gồm 3 phần chính:</p> <ul> <li>Cam kết (commitment) với danh sách txs trong block</li> <li>Bitmap thể hiện những tx nào leader có thể cung cấp nếu cần</li> <li>Metadata để mapping chunk so với dữ liệu thực</li> </ul> <p>Sau khi nhận compact block, các validator sẽ check xem mình có đủ data chưa. Nếu thiếu, họ yêu cầu phần parity data còn thiếu để reconstruct lại block. Vì mỗi node đã có đủ dữ liệu từ trước. Lúc này, leader không cần truyền gì thêm ngoài compact block.</p> <p><strong>Đây là actual black magic của Vacuum!</strong></p> <br> <div class="row wm-article-nav-buttons" role=navigation aria-label=navigation> <div class="wm-article-nav pull-right"> <a href=../03-VerifiableEncryption-PrivateDA/ class="btn btn-xs btn-default pull-right"> Next <i class="fa fa-chevron-right" aria-hidden=true></i> </a> <a href=../03-VerifiableEncryption-PrivateDA/ class="btn btn-xs btn-link"> VERIFIABLE ENCRYPTION &amp; PRIVATE Data trên Celestia </a> </div> <div class=wm-article-nav> <a href=../01-Celestia_Da_DAS_Blobs/ class="btn btn-xs btn-default pull-left"> <i class="fa fa-chevron-left" aria-hidden=true></i> Previous</a><a href=../01-Celestia_Da_DAS_Blobs/ class="btn btn-xs btn-link"> DA, DAS, and Blobs — Celestia Lesson 📦🧠 </a> </div> </div> <br> </div> <div class=giscus-wrapper> <div class=giscus></div> <script src=https://giscus.app/client.js data-repo=hien-p/hari-docs data-repo-id=R_kgDOPQrn9w data-category=Announcements data-category-id=DIC_kwDOPQrn984CtVCd data-mapping=title data-strict=0 data-reactions-enabled=1 data-emit-metadata=1 data-input-position=top data-theme=light data-lang=en crossorigin=anonymous async>
  </script> </div> <!-- <footer class="container-fluid wm-page-content">
  <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a> using <a href="https://github.com/gristlabs/mkdocs-windmill">Windmill</a> theme by Grist Labs.</p>
</footer> --> </body> </html>